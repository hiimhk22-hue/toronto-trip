<!DOCTYPE html>

<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>í† ë¡ í†  ì—¬í–‰ ê²½ë¹„ ì •ì‚°</title>
<style>
:root {
  --bg:#f7f8fb; --card:#fff; --muted:#6b7280; --text:#111827; --radius:16px;
}
* { box-sizing:border-box; }
body { margin:0; background:var(--bg); color:var(--text); font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Noto Sans KR',Arial,sans-serif; }
.container { max-width:1040px; margin:0 auto; padding:20px 16px 40px; }
h1 { margin:8px 0 4px; font-size:28px; }
.sub { color:var(--muted); font-size:14px; margin-bottom:16px; }

.grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(180px,1fr)); gap:12px; }
.card { background:var(--card); border:1px solid #e5e7eb; border-radius:var(--radius); padding:14px; }
.card h3 { margin:0 0 6px; font-size:14px; color:var(--muted); }
.big { font-weight:700; font-size:22px; }
.small { color:var(--muted); font-size:12px; }

.chips { display:flex; gap:6px; flex-wrap:wrap; margin:10px 0 0; }
.chip { padding:6px 12px; border-radius:999px; background:#eef2ff; color:#1f2937; border:1px solid #e5e7eb; cursor:pointer; }
.chip.active { background:#111; color:#fff; border-color:#111; }

.entry { background:var(--card); border:1px solid #e5e7eb; border-radius:var(--radius); padding:14px; margin:10px 0; display:flex; gap:10px; justify-content:space-between; align-items:flex-start; }
.entry .left { display:flex; gap:10px; align-items:flex-start; }
.badge { padding:4px 8px; border-radius:999px; border:1px solid #e5e7eb; background:#f4f4f5; font-size:12px; }
.title { font-size:16px; font-weight:600; margin:2px 0 6px; }
.people { display:flex; gap:6px; flex-wrap:wrap; }
.person-pill { padding:2px 8px; border-radius:999px; font-size:12px; border:1px solid #e5e7eb; background:#f1f5f9; }
.amount { text-align:right; min-width:120px; }
.amount .big { font-size:16px; }
.note { font-size:12px; color:var(--muted); }

/* ì´ˆì†Œí˜• í™”ë©´ì—ì„œ ì»¨í…Œì´ë„ˆ íŒ¨ë”©ë§Œ ì¡°ì • */
@media (max-width: 360px){
  .container { padding:16px 12px 28px; }
}

/* ëª¨ë°”ì¼(â‰¤768px)ì—ì„œ ê°œì¸/ì¹´í…Œê³ ë¦¬ ì¹´ë“œ 2ì—´ ê³ ì • */
@media (max-width: 768px){
  #personCards,
  #catCards{
    display: grid !important;
    grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
    gap: 12px !important;
  }
  #personCards .card,
  #catCards .card{
    width: 100% !important;
    margin: 0 !important;
  }
}




/* ==== Category label palette (warm, low saturation pastel) ==== */
.badge[data-cat="êµí†µ"] { background: rgba(249,115,22,.18); border-color: rgba(249,115,22,.4); color:#7A3A0D; }  /* warm orange */
.badge[data-cat="ì‹ë¹„"] { background: rgba(245,158,11,.18); border-color: rgba(245,158,11,.4); color:#6C4E06; }   /* amber */
.badge[data-cat="ê´€ê´‘"] { background: rgba(225,29,72,.18); border-color: rgba(225,29,72,.38); color:#7A162E; }    /* rose */
.badge[data-cat="ìˆ™ë°•"] { background: rgba(192,132,252,.20); border-color: rgba(192,132,252,.45); color:#5B21B6; }  /* soft purple */
.badge[data-cat="ì‡¼í•‘"] { background: rgba(236,72,153,.18); border-color: rgba(236,72,153,.4); color:#85144b; }    /* pink */
.badge[data-cat="ê¸°íƒ€"] { background: rgba(217,119,6,.18); border-color: rgba(217,119,6,.4); color:#6B3D03; }      /* brownish */



/* === Person color variables (match chips & cards) === */
:root {
  --p-ì¤‘í˜„:#3B82F6;  /* blue */
  --p-íƒœìˆœ:#A78BFA;  /* purple */
  --p-íƒœì:#22C55E;  /* green */
  --p-ì„œí˜„:#F472B6;  /* pink */
  --p-í˜„ê²½:#F59E0B;  /* orange */
  --p-ìŠ¹í˜„:#06B6D4;  /* cyan */
}

/* Person summary card look */
#personCards .card {
  position: relative;
  overflow: hidden;
  border-radius: 16px;
  padding-top: 12px;
}



/* Per-person theming (bg = 15% opacity, top border & dot color) */
#personCards .card[data-person="ì¤‘í˜„"] { background: rgba(59,130,246,.15); border-color: rgba(59,130,246,.35); }
#personCards .card[data-person="ì¤‘í˜„"]::before { content:""; position:absolute; left:0; right:0; top:0; height:4px; background: var(--p-ì¤‘í˜„); }
#personCards .card[data-person="ì¤‘í˜„"] .name-dot { background: var(--p-ì¤‘í˜„); }

#personCards .card[data-person="íƒœìˆœ"] { background: rgba(167,139,250,.15); border-color: rgba(167,139,250,.35); }
#personCards .card[data-person="íƒœìˆœ"]::before { content:""; position:absolute; left:0; right:0; top:0; height:4px; background: var(--p-íƒœìˆœ); }
#personCards .card[data-person="íƒœìˆœ"] .name-dot { background: var(--p-íƒœìˆœ); }

#personCards .card[data-person="íƒœì"] { background: rgba(34,197,94,.15); border-color: rgba(34,197,94,.35); }
#personCards .card[data-person="íƒœì"]::before { content:""; position:absolute; left:0; right:0; top:0; height:4px; background: var(--p-íƒœì); }
#personCards .card[data-person="íƒœì"] .name-dot { background: var(--p-íƒœì); }

#personCards .card[data-person="ì„œí˜„"] { background: rgba(244,114,182,.15); border-color: rgba(244,114,182,.35); }
#personCards .card[data-person="ì„œí˜„"]::before { content:""; position:absolute; left:0; right:0; top:0; height:4px; background: var(--p-ì„œí˜„); }
#personCards .card[data-person="ì„œí˜„"] .name-dot { background: var(--p-ì„œí˜„); }

#personCards .card[data-person="í˜„ê²½"] { background: rgba(245,158,11,.15); border-color: rgba(245,158,11,.35); }
#personCards .card[data-person="í˜„ê²½"]::before { content:""; position:absolute; left:0; right:0; top:0; height:4px; background: var(--p-í˜„ê²½); }
#personCards .card[data-person="í˜„ê²½"] .name-dot { background: var(--p-í˜„ê²½); }

#personCards .card[data-person="ìŠ¹í˜„"] { background: rgba(6,182,212,.15); border-color: rgba(6,182,212,.35); }
#personCards .card[data-person="ìŠ¹í˜„"]::before { content:""; position:absolute; left:0; right:0; top:0; height:4px; background: var(--p-ìŠ¹í˜„); }
#personCards .card[data-person="ìŠ¹í˜„"] .name-dot { background: var(--p-ìŠ¹í˜„); }


/* Filter chips: outlined default, filled when active with person color, no border */
#peopleChips .chip { border:1px solid currentColor; background: transparent; color:#64748b; }
#peopleChips .chip[data-person="ì¤‘í˜„"]{ color: var(--p-ì¤‘í˜„); }
#peopleChips .chip[data-person="íƒœìˆœ"]{ color: var(--p-íƒœìˆœ); }
#peopleChips .chip[data-person="íƒœì"]{ color: var(--p-íƒœì); }
#peopleChips .chip[data-person="ì„œí˜„"]{ color: var(--p-ì„œí˜„); }
#peopleChips .chip[data-person="í˜„ê²½"]{ color: var(--p-í˜„ê²½); }
#peopleChips .chip[data-person="ìŠ¹í˜„"]{ color: var(--p-ìŠ¹í˜„); }
#peopleChips .chip.active { border-color: transparent; color:#fff; }
#peopleChips .chip.active[data-person="ì¤‘í˜„"]{ background: var(--p-ì¤‘í˜„); }
#peopleChips .chip.active[data-person="íƒœìˆœ"]{ background: var(--p-íƒœìˆœ); }
#peopleChips .chip.active[data-person="íƒœì"]{ background: var(--p-íƒœì); }
#peopleChips .chip.active[data-person="ì„œí˜„"]{ background: var(--p-ì„œí˜„); }
#peopleChips .chip.active[data-person="í˜„ê²½"]{ background: var(--p-í˜„ê²½); }
#peopleChips .chip.active[data-person="ìŠ¹í˜„"]{ background: var(--p-ìŠ¹í˜„); }

/* ì „ì²´ ë²„íŠ¼ í™œì„±í™”ëŠ” ë”¥ê·¸ë ˆì´ */
#peopleChips .chip:not([data-person]).active { background:#0f172a; color:#fff; border-color:transparent; }

/* 1) ì¹´í…Œê³ ë¦¬ ë¼ë²¨ì€ ì¤„ë°”ê¿ˆ ê¸ˆì§€ */
.badge, #catCards h3 { white-space: nowrap; }


/* 3) ì‚¬ëŒ ì´ë¦„ ë¼ë²¨( pill ) ì»¬ëŸ¬ë¥¼ ê° ì‚¬ëŒë³„ë¡œ ê³ ì •(ë‹¨ìƒ‰, í…Œë‘ë¦¬ ë™ì¼ ì»¬ëŸ¬) */
.person-pill[data-person="ì¤‘í˜„"] { background: var(--p-ì¤‘í˜„); color:#fff; border-color: var(--p-ì¤‘í˜„); }
.person-pill[data-person="íƒœìˆœ"] { background: var(--p-íƒœìˆœ); color:#fff; border-color: var(--p-íƒœìˆœ); }
.person-pill[data-person="íƒœì"] { background: var(--p-íƒœì); color:#fff; border-color: var(--p-íƒœì); }
.person-pill[data-person="ì„œí˜„"] { background: var(--p-ì„œí˜„); color:#fff; border-color: var(--p-ì„œí˜„); }
.person-pill[data-person="í˜„ê²½"] { background: var(--p-í˜„ê²½); color:#fff; border-color: var(--p-í˜„ê²½); }
.person-pill[data-person="ìŠ¹í˜„"] { background: var(--p-ìŠ¹í˜„); color:#fff; border-color: var(--p-ìŠ¹í˜„); }



#peopleChips .chip { transition: transform .12s ease, background-color .2s ease, color .2s ease, border-color .2s ease; will-change: transform; }
#peopleChips .chip.is-pressing { transform: scale(0.96); }

#entryList .entry { opacity: 0; transform: translateY(10px); transition: opacity .3s ease, transform .3s ease; }
#entryList .entry.appear { opacity: 1; transform: translateY(0); }

/* === Updated press animation === */
#peopleChips .chip, #personCards .card[data-person] {
  transition: transform .15s ease, background-color .2s ease, color .2s ease, border-color .2s ease;
  will-change: transform;
}
#peopleChips .chip.is-pressing, #personCards .card[data-person].is-pressing {
  transform: scale(0.92);
}
</style>
</head>
<body>
<div class="container">
<h1>í† ë¡ í†  ì—¬í–‰ ê²½ë¹„ ì •ì‚°</h1><div class="sub" id="totalLine"></div>
<h2 class="small">ê°œì¸ë³„ ì§€ì¶œ ì´ì•¡</h2>
<div class="grid" id="personCards"></div>
<br/>
<h2 class="small" style="margin-top:12px;">ì¹´í…Œê³ ë¦¬ë³„ ì§€ì¶œ ìš”ì•½</h2>
<div class="grid" id="catCards"></div>
<br/>
<h2 class="small" style="margin-top:4px;">ì§€ì¶œ ìƒì„¸ ë‚´ì—­</h2>
<div class="chips" id="peopleChips"></div>
<div id="entryList"></div>
</div>
<script>
function attachPressHandlers(){
  const els = document.querySelectorAll('#peopleChips .chip, #personCards .card[data-person]');
  els.forEach(el => {
    const add = () => el.classList.add('is-pressing');
    const rm  = () => el.classList.remove('is-pressing');
    el.addEventListener('mousedown', add);
    el.addEventListener('touchstart', add, {passive:true});
    ['mouseup','mouseleave','touchend','touchcancel','blur'].forEach(ev => el.addEventListener(ev, rm));
  });
}

const DATA = {"grand_total": 6780.09, "people": ["ì„œí˜„", "ìŠ¹í˜„", "ì¤‘í˜„", "íƒœìˆœ", "íƒœì", "í˜„ê²½"], "person_totals": {"ì„œí˜„": 1461.4, "ìŠ¹í˜„": 814.53, "ì¤‘í˜„": 1008.78, "íƒœìˆœ": 1181.42, "íƒœì": 1484.51, "í˜„ê²½": 826.40}, "cat_totals": {"ê¸°íƒ€": 28.0, "ìˆ™ë°•": 1617.47, "êµí†µ": 977.40, "ì‹ë¹„": 1667.70, "ê´€ê´‘": 1945.37, "ì‡¼í•‘": 544.14}, "entries": [{"date": "9/22", "category": "ê¸°íƒ€", "title": "ë¹„ìì‹ ì²­", "amount": 28.0, "share": 7.0, "people": ["ì„œí˜„", "ì¤‘í˜„", "íƒœìˆœ", "íƒœì"], "memo": ""}, {"date": "9/22", "category": "ìˆ™ë°•", "title": "ì½˜ë„ ê²ŒìŠ¤íŠ¸ë£¸ ìˆ™ë°•ë¹„", "amount": 750.0, "share": 375.0, "people": ["ì„œí˜„", "íƒœì"], "memo": "1ë°• 125ë¶ˆ (*6ë°•)"}, {"date": "9/22", "category": "êµí†µ", "title": "íƒì‹œ(ê³µí•­~ì§‘)", "amount": 86.3, "share": 14.38, "people": ["ì„œí˜„", "ìŠ¹í˜„", "ì¤‘í˜„", "íƒœìˆœ", "íƒœì", "í˜„ê²½"], "memo": ""}, {"date": "9/23", "category": "êµí†µ", "title": "ë‚˜ì´ì•„ê°€ë¼ êµí†µ 2ì¼ê¶Œ", "amount": 270.0, "share": 45.0, "people": ["ì„œí˜„", "ìŠ¹í˜„", "ì¤‘í˜„", "íƒœìˆœ", "íƒœì", "í˜„ê²½"], "memo": "Go Train / Wego Bus"}, {"date": "9/23", "category": "ìˆ™ë°•", "title": "ë‚˜ì´ì•„ê°€ë¼ í˜¸í…” (ìš°ë¦¬ë°©)", "amount": 213.05, "share": 106.53, "people": ["ìŠ¹í˜„", "í˜„ê²½"], "memo": ""}, {"date": "9/23", "category": "ìˆ™ë°•", "title": "ë‚˜ì´ì•„ê°€ë¼ í˜¸í…” (ì´ëª¨ë°©)", "amount": 328.87, "share": 164.44, "people": ["ì„œí˜„", "íƒœì"], "memo": ""}, {"date": "9/23", "category": "ìˆ™ë°•", "title": "ë‚˜ì´ì•„ê°€ë¼ í˜¸í…” (ì—„ë¹ ë°©)", "amount": 325.55, "share": 162.78, "people": ["ì¤‘í˜„", "íƒœìˆœ"], "memo": ""}, {"date": "9/23", "category": "ì‹ë¹„", "title": "ë‚˜ì´ì•„ê°€ë¼ ì¹´í˜ ë¹µ/ì»¤í”¼", "amount": 35.76, "share": 5.96, "people": ["ì„œí˜„", "ìŠ¹í˜„", "ì¤‘í˜„", "íƒœìˆœ", "íƒœì", "í˜„ê²½"], "memo": ""}, {"date": "9/23", "category": "ê´€ê´‘", "title": "ë‚˜ì´ì•„ê°€ë¼ í­í¬ë™êµ´", "amount": 194.94, "share": 32.49, "people": ["ì„œí˜„", "ìŠ¹í˜„", "ì¤‘í˜„", "íƒœìˆœ", "íƒœì", "í˜„ê²½"], "memo": "Journey Behind the Falls"}, {"date": "9/23", "category": "ê´€ê´‘", "title": "ë‚˜ì´ì•„ê°€ë¼ í¬ë£¨ì¦ˆ", "amount": 194.16, "share": 48.54, "people": ["ì„œí˜„", "ì¤‘í˜„", "íƒœìˆœ", "íƒœì"], "memo": "Hornblower"}, {"date": "9/23", "category": "êµí†µ", "title": "íƒì‹œ (í´ë¦¬í”„íŠ¼í~ì‹ë‹¹)", "amount": 14.35, "share": 2.39, "people": ["ì„œí˜„", "ìŠ¹í˜„", "ì¤‘í˜„", "íƒœìˆœ", "íƒœì", "í˜„ê²½"], "memo": ""}, {"date": "9/23", "category": "ì‹ë¹„", "title": "ì €ë… Copa steak", "amount": 577.02, "share": 96.17, "people": ["ì„œí˜„", "ìŠ¹í˜„", "ì¤‘í˜„", "íƒœìˆœ", "íƒœì", "í˜„ê²½"], "memo": "ë¸Œë¼ì§ˆ ìŠ¤í…Œì´í¬"}, {"date": "9/24", "category": "ê´€ê´‘", "title": "í™”ì´íŠ¸ ì›Œí„° ì›Œí¬", "amount": 135.6, "share": 22.6, "people": ["ì„œí˜„", "ìŠ¹í˜„", "ì¤‘í˜„", "íƒœìˆœ", "íƒœì", "í˜„ê²½"], "memo": "White Water Walk"}, {"date": "9/24", "category": "ì‹ë¹„", "title": "ì˜¨ë”ë ˆì´í¬ ì ì‹¬ (íƒœêµ­ì‹ë‹¹)", "amount": 181.29, "share": 30.21, "people": ["ì„œí˜„", "ìŠ¹í˜„", "ì¤‘í˜„", "íƒœìˆœ", "íƒœì", "í˜„ê²½"], "memo": ""}, {"date": "9/24", "category": "ì‹ë¹„", "title": "ì˜¨ë”ë ˆì´í¬ COWS ì•„ì´ìŠ¤í¬ë¦¼", "amount": 37.29, "share": 6.21, "people": ["ì„œí˜„", "ìŠ¹í˜„", "ì¤‘í˜„", "íƒœìˆœ", "íƒœì", "í˜„ê²½"], "memo": ""}, {"date": "9/24", "category": "êµí†µ", "title": "íƒì‹œ(ê¸°ì°¨ì—­~ì§‘)", "amount": 19.02, "share": 3.17, "people": ["ì„œí˜„", "ìŠ¹í˜„", "ì¤‘í˜„", "íƒœìˆœ", "íƒœì", "í˜„ê²½"], "memo": ""}, {"date": "9/24", "category": "ì‹ë¹„", "title": "ì¥ë³´ê¸°", "amount": 61.79, "share": 10.3, "people": ["ì„œí˜„", "ìŠ¹í˜„", "ì¤‘í˜„", "íƒœìˆœ", "íƒœì", "í˜„ê²½"], "memo": "ì±„ì†Œ, ê³¼ì¼, ê³ ê¸°"}, {"date": "9/25", "category": "êµí†µ", "title": "íƒì‹œ (ì§‘~ë¯¸ìˆ ê´€)", "amount": 22.45, "share": 3.74, "people": ["ì„œí˜„", "ìŠ¹í˜„", "ì¤‘í˜„", "íƒœìˆœ", "íƒœì", "í˜„ê²½"], "memo": ""}, {"date": "9/25", "category": "ê´€ê´‘", "title": "ë¯¸ìˆ ê´€í‹°ì¼“", "amount": 60.0, "share": 10.0, "people": ["ì„œí˜„", "ìŠ¹í˜„", "ì¤‘í˜„", "íƒœìˆœ", "íƒœì", "í˜„ê²½"], "memo": ""}, {"date": "9/25", "category": "ì‹ë¹„", "title": "í”¼ì PIZZAIOLO", "amount": 45.38, "share": 7.56, "people": ["ì„œí˜„", "ìŠ¹í˜„", "ì¤‘í˜„", "íƒœìˆœ", "íƒœì", "í˜„ê²½"], "memo": ""}, {"date": "9/25", "category": "ì‹ë¹„", "title": "ì»¤í”¼ (íŒ€í™€íŠ¼)", "amount": 21.0, "share": 3.0, "people": ["ì„œí˜„", "ìŠ¹í˜„", "ì¤‘í˜„", "íƒœìˆœ", "íƒœì", "í˜„ê²½"], "memo": ""}, {"date": "9/25", "category": "êµí†µ", "title": "íƒì‹œ (í† ë¡ í† ëŒ€í•™êµ~ì§‘)", "amount": 21.2, "share": 3.53, "people": ["ì„œí˜„", "ìŠ¹í˜„", "ì¤‘í˜„", "íƒœìˆœ", "íƒœì", "í˜„ê²½"], "memo": ""}, {"date": "9/25", "category": "ì‹ë¹„", "title": "ë¡œë¸”ë¡œìŠ¤ ì¥ë³´ê¸°", "amount": 41.08, "share": 6.85, "people": ["ì„œí˜„", "ìŠ¹í˜„", "ì¤‘í˜„", "íƒœìˆœ", "íƒœì", "í˜„ê²½"], "memo": "35.90 (ì¥ë³´ê¸°) + 5.18 (ë¨¸í•€2ê°œ)"}, {"date": "9/25", "category": "ì‡¼í•‘", "title": "ë“œëŸ­ìŠ¤í† ì–´", "amount": 24.0, "share": 24.0, "people": ["ì„œí˜„"], "memo": "ë©œë¼í† ë‹Œ"}, {"date": "9/25", "category": "ì‡¼í•‘", "title": "ë“œëŸ­ìŠ¤í† ì–´", "amount": 8.0, "share": 8.0, "people": ["ì¤‘í˜„"], "memo": "ìƒ¤ì›Œíƒ€ì˜¬"}, {"date": "9/26", "category": "êµí†µ", "title": "ì•Œê³¤í€¸ ë ŒíŠ¸ì¹´", "amount": 326.93, "share": 54.49, "people": ["ì„œí˜„", "ìŠ¹í˜„", "ì¤‘í˜„", "íƒœìˆœ", "íƒœì", "í˜„ê²½"], "memo": "276.93 (ë ŒíŠ¸ë¹„) + 50.00 (ì£¼í–‰ê±°ë¦¬ ë¬´ì œí•œ)"}, {"date": "9/26", "category": "êµí†µ", "title": "ë ŒíŠ¸ì¹´ ì£¼ìœ ë¹„", "amount": 88.38, "share": 14.73, "people": ["ì„œí˜„", "ìŠ¹í˜„", "ì¤‘í˜„", "íƒœìˆœ", "íƒœì", "í˜„ê²½"], "memo": "61.75 + 26.63"}, {"date": "9/26", "category": "ê´€ê´‘", "title": "ëŒì…‹ ì „ë§ëŒ€", "amount": 18.55, "share": 3.09, "people": ["ì„œí˜„", "ìŠ¹í˜„", "ì¤‘í˜„", "íƒœìˆœ", "íƒœì", "í˜„ê²½"], "memo": ""}, {"date": "9/26", "category": "ê´€ê´‘", "title": "ì•Œê³¤í€¸ ì…ì¥ë£Œ", "amount": 42.0, "share": 7.0, "people": ["ì„œí˜„", "ìŠ¹í˜„", "ì¤‘í˜„", "íƒœìˆœ", "íƒœì", "í˜„ê²½"], "memo": ""}, {"date": "9/26", "category": "ì‹ë¹„", "title": "í•œì‹ë‹¹ ì¡°ì„ ì˜¥", "amount": 163.35, "share": 27.22, "people": ["ì„œí˜„", "ìŠ¹í˜„", "ì¤‘í˜„", "íƒœìˆœ", "íƒœì", "í˜„ê²½"], "memo": ""}, {"date": "9/26", "category": "ì‹ë¹„", "title": "ê°¤ëŸ¬ë¦¬ì•„ ì¥ë³´ê¸°", "amount": 125.18, "share": 62.59, "people": ["ì¤‘í˜„", "íƒœìˆœ"], "memo": "ìŒí™”ì°¨, ë„ë¼ì§€ì²­ í¬í•¨"}, {"date": "9/27", "category": "ì‡¼í•‘", "title": "ê¸°ë…í’ˆ (ë””ìì¸ìŠ¤í† ì–´)", "amount": 24.86, "share": 24.86, "people": ["íƒœì"], "memo": "í† ë¡ í†  íŒ¨ë¸Œë¦­"}, {"date": "9/27", "category": "ì‡¼í•‘", "title": "ê¸°ë…í’ˆ (ë””ìì¸ìŠ¤í† ì–´)", "amount": 73.44, "share": 73.44, "people": ["ì„œí˜„"], "memo": "ì„ ì˜ ë…¸íŠ¸, í† ë¡ í†  íŒ¨ë¸Œë¦­ ë“±"}, {"date": "9/27", "category": "ê´€ê´‘", "title": "2ì¸µë²„ìŠ¤+í¬ë£¨ì¦ˆ", "amount": 598.38, "share": 99.73, "people": ["ì„œí˜„", "ìŠ¹í˜„", "ì¤‘í˜„", "íƒœìˆœ", "íƒœì", "í˜„ê²½"], "memo": ""}, {"date": "9/27", "category": "ì‹ë¹„", "title": "ì ì‹¬ (ìƒŒë“œìœ„ì¹˜+ìŠ¤íŒŒê²Œí‹°)", "amount": 89.84, "share": 14.97, "people": ["ì„œí˜„", "ìŠ¹í˜„", "ì¤‘í˜„", "íƒœìˆœ", "íƒœì", "í˜„ê²½"], "memo": "ì„¸ì¸íŠ¸ë¡œë ŒìŠ¤ ë§ˆì¼“ì—ì„œ ì•¼ì™¸í…Œì´ë¸”"}, {"date": "9/27", "category": "ì‹ë¹„", "title": "ì ì‹¬ (ì»¤í”¼)", "amount": 9.8, "share": 1.63, "people": ["ì„œí˜„", "ìŠ¹í˜„", "ì¤‘í˜„", "íƒœìˆœ", "íƒœì", "í˜„ê²½"], "memo": "ì»¤í”¼"}, {"date": "9/27", "category": "ì‡¼í•‘", "title": "ê¸°ë…í’ˆ (ì„¸ì¸íŠ¸ë¡œë ŒìŠ¤ë§ˆì¼“)", "amount": 138.36, "share": 138.36, "people": ["íƒœìˆœ"], "memo": ""}, {"date": "9/27", "category": "ì‡¼í•‘", "title": "ê¸°ë…í’ˆ (ì„¸ì¸íŠ¸ë¡œë ŒìŠ¤ë§ˆì¼“)", "amount": 89.2, "share": 89.2, "people": ["íƒœì"], "memo": ""}, {"date": "9/27", "category": "ì‡¼í•‘", "title": "ê¸°ë…í’ˆ (ì„¸ì¸íŠ¸ë¡œë ŒìŠ¤ë§ˆì¼“)", "amount": 14.68, "share": 14.68, "people": ["ì„œí˜„"], "memo": ""}, {"date": "9/27", "category": "ê´€ê´‘", "title": "CNíƒ€ì›Œ íšŒì „ë ˆìŠ¤í† ë‘", "amount": 701.74, "share": 116.96, "people": ["ì„œí˜„", "ìŠ¹í˜„", "ì¤‘í˜„", "íƒœìˆœ", "íƒœì", "í˜„ê²½"], "memo": "360 Restaurant + ì „ë§ëŒ€"}, {"date": "9/28", "category": "ì‹ë¹„", "title": "ë¸ŒëŸ°ì¹˜", "amount": 236.81, "share": 39.47, "people": ["ì„œí˜„", "ìŠ¹í˜„", "ì¤‘í˜„", "íƒœìˆœ", "íƒœì", "í˜„ê²½"], "memo": "The Dorset"}, {"date": "9/28", "category": "ì‡¼í•‘", "title": "ê¸°ë…í’ˆ (ì°¨ì´ë‚˜íƒ€ìš´)", "amount": 54.15, "share": 54.15, "people": ["íƒœìˆœ"], "memo": ""}, {"date": "9/28", "category": "ì‡¼í•‘", "title": "ê¸°ë…í’ˆ (ì°¨ì´ë‚˜íƒ€ìš´)", "amount": 71.15, "share": 71.15, "people": ["íƒœì"], "memo": ""}, {"date": "9/28", "category": "ì‡¼í•‘", "title": "ê¸°ë…í’ˆ (ì°¨ì´ë‚˜íƒ€ìš´)", "amount": 46.3, "share": 46.3, "people": ["ì„œí˜„"], "memo": ""}, {"date": "9/28", "category": "êµí†µ", "title": "íƒì‹œ (ì¼„ì‹±í„´~ì¹´ì‚¬ë¡œë§ˆ)", "amount": 18.51, "share": 3.09, "people": ["ì„œí˜„", "ìŠ¹í˜„", "ì¤‘í˜„", "íƒœìˆœ", "íƒœì", "í˜„ê²½"], "memo": ""}, {"date": "9/28", "category": "ì‹ë¹„", "title": "ì¹´ì‚¬ë¡œë§ˆ ê°„ì‹(ì•„ì´ìŠ¤í¬ë¦¼)", "amount": 18.39, "share": 3.68, "people": ["ì„œí˜„", "ìŠ¹í˜„", "ì¤‘í˜„", "íƒœìˆœ", "í˜„ê²½"], "memo": "ì•„ì´ìŠ¤í¬ë¦¼ 15, íƒ„ì‚°ìˆ˜ 3.39"}, {"date": "9/28", "category": "ì‹ë¹„", "title": "ê°„ì‹ ê°€ë¼ì•„ê²Œ", "amount": 23.73, "share": 11.87, "people": ["ì¤‘í˜„", "í˜„ê²½"], "memo": ""}, {"date": "9/28", "category": "êµí†µ", "title": "íƒì‹œ (ì¹´ì‚¬ë¡œë§ˆ~ì§‘)", "amount": 23.08, "share": 3.85, "people": ["ì„œí˜„", "ìŠ¹í˜„", "ì¤‘í˜„", "íƒœìˆœ", "íƒœì", "í˜„ê²½"], "memo": ""}, {"date": "9/29", "category": "êµí†µ", "title": "íƒì‹œ (ì§‘~ê³µí•­)", "amount": 87.18, "share": 14.53, "people": ["ì„œí˜„", "ìŠ¹í˜„", "ì¤‘í˜„", "íƒœìˆœ", "íƒœì", "í˜„ê²½"], "memo": ""}]};
const EXCHANGE = 1010; // 1 CAD -> KRW

// === normalize to 2 decimals ===
(function(){
  function r2(x){ return Math.round((x + Number.EPSILON) * 100) / 100; }
  DATA.grand_total = r2(DATA.grand_total);
  Object.keys(DATA.person_totals).forEach(k=> DATA.person_totals[k]=r2(DATA.person_totals[k]));
  Object.keys(DATA.cat_totals).forEach(k=> DATA.cat_totals[k]=r2(DATA.cat_totals[k]));
  DATA.entries = DATA.entries.map(e=> Object.assign(e, {amount:r2(e.amount), share:r2(e.share)}));
})();

const PEOPLE_ORDER = ["ì¤‘í˜„","íƒœìˆœ","íƒœì","ì„œí˜„","í˜„ê²½","ìŠ¹í˜„"];
const CAT_ORDER = ["ìˆ™ë°•","ì‡¼í•‘","ê´€ê´‘","ê¸°íƒ€","ì‹ë¹„","êµí†µ"];

function attachChipPressHandlers(){
  document.querySelectorAll('#peopleChips .chip').forEach(ch => {
    const add = () => ch.classList.add('is-pressing');
    const rm  = () => ch.classList.remove('is-pressing');
    ch.addEventListener('mousedown', add);
    ch.addEventListener('touchstart', add, {passive:true});
    ['mouseup','mouseleave','touchend','touchcancel','blur'].forEach(ev => ch.addEventListener(ev, rm));
  });
  animateEntries();
}

function attachPersonCardClickHandlers(){
  document.querySelectorAll('#personCards .card[data-person]').forEach(card => {
    card.style.cursor = 'pointer';
    card.addEventListener('click', () => {
      const who = card.getAttribute('data-person');
      if(!who) return;
      activePerson = who;
      renderPeopleChips();
      attachPressHandlers();
      renderEntries();
      // Smooth scroll to filter bar for context on mobile
      const bar = document.getElementById('peopleChips');
      if(bar){ bar.scrollIntoView({behavior:'smooth', block:'start'}); }
    });
  });
}

function animateEntries(){
  const rows = document.querySelectorAll('#entryList .entry');
  rows.forEach((el, i) => { setTimeout(() => el.classList.add('appear'), 15 * i); });
}


const krw = v => "â‚©" + (v*EXCHANGE).toLocaleString("ko-KR", { maximumFractionDigits: 0 });
const cad = v => "$" + v.toLocaleString('en-US', {"minimumFractionDigits":2, "maximumFractionDigits":2});


function renderPersonCards(){
  const wrap = document.getElementById('personCards'); wrap.innerHTML="";
  const list = [...new Set(PEOPLE_ORDER.filter(p=>DATA.people.includes(p)).concat(DATA.people))];
  list.forEach(p=>{ const v=DATA.person_totals[p]||0;
    const d=document.createElement('div'); d.className='card'; d.setAttribute('data-person', p);
    d.innerHTML=`<h3>${p}</h3><div class='big'>${cad(v)}</div><div class='small'>${krw(v)}</div>`; wrap.appendChild(d);
  });
  animateEntries();
}

const EMO = {"ìˆ™ë°•":"ğŸ›Œ","ì‡¼í•‘":"ğŸ›ï¸","ê´€ê´‘":"ğŸ­","ê¸°íƒ€":"ğŸ“‹","ì‹ë¹„":"ğŸ½ï¸","êµí†µ":"ğŸš•"};
function renderCatCards(){
  const wrap=document.getElementById('catCards'); wrap.innerHTML="";
  CAT_ORDER.forEach(c=>{ const v=DATA.cat_totals[c]||0;
    const d=document.createElement('div'); d.className='card';
    d.innerHTML = `<h3>${EMO[c]||""} ${c}</h3><div class='big'>${cad(v)}</div><div class='small'>${krw(v)}</div>`; wrap.appendChild(d);
  });
  animateEntries();
}

let activePerson='ALL';
function renderPeopleChips(){
  const wrap=document.getElementById('peopleChips'); wrap.innerHTML="";
  const mk=(label,val)=>{ const b=document.createElement('button'); b.className='chip'+(val===activePerson?' active':''); b.textContent=label; if(val!=='ALL'){ b.setAttribute('data-person', val); } b.onclick=()=>{activePerson=val; renderPeopleChips(); attachPressHandlers(); attachPersonCardClickHandlers(); renderEntries();}; return b; };
  wrap.appendChild(mk('ì „ì²´','ALL'));
  const list=[...new Set(PEOPLE_ORDER.filter(p=>DATA.people.includes(p)).concat(DATA.people))];
  list.forEach(n=>wrap.appendChild(mk(n,n)));
}

function renderEntries(){
  const wrap=document.getElementById('entryList'); wrap.innerHTML="";
  const items=DATA.entries.slice().sort((a,b)=>{const ai=CAT_ORDER.indexOf(a.category), bi=CAT_ORDER.indexOf(b.category); return (ai-bi)||a.date.localeCompare(b.date);});
  items.forEach(e=>{ if(activePerson!=='ALL' && !e.people.includes(activePerson)) return;
    const d=document.createElement('div'); d.className='entry';
    const left=document.createElement('div'); left.className='left';
    left.innerHTML=`<div class='badge' data-cat='${e.category}'>${e.category}</div>
    <div><div class='small' style='opacity:.75;'>${e.date}</div><div class='title'>${e.title}</div><div class='people'></div></div>`;
    const box=left.querySelector('.people'); e.people.forEach(p=>{const s=document.createElement('span'); s.className='person-pill'; s.setAttribute('data-person', p); s.textContent=p; box.appendChild(s);});
    const right=document.createElement('div'); right.className='amount';
    right.innerHTML=`<div class='big'>ì´ì§€ì¶œ ${cad(e.amount)}</div><div class='note'>ê°œì¸ë¶€ë‹´ê¸ˆ $${e.share.toFixed(2)}</div>`;
    d.appendChild(left); d.appendChild(right); wrap.appendChild(d);
  });
  animateEntries();
}

renderPersonCards(); renderCatCards(); renderPeopleChips(); attachPressHandlers(); attachPersonCardClickHandlers(); renderEntries();
// write total line
document.getElementById('totalLine').textContent = "ì´ ì§€ì¶œ ê¸ˆì•¡: $" + DATA.grand_total.toFixed(2);

</script>
</body>
</html>
